{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "version": "2.0.0",
  "description": "Centralized validation rules for TrossApp - shared across frontend and backend",
  "lastUpdated": "2025-11-13",
  "policy": {
    "email": {
      "tldValidation": "permissive",
      "description": "Accept any TLD format - no fascist restrictions! ðŸš€"
    }
  },
  "fields": {
    "email": {
      "type": "string",
      "format": "email",
      "required": true,
      "maxLength": 255,
      "tldRestriction": false,
      "trim": true,
      "lowercase": true,
      "pattern": "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z0-9]+$",
      "errorMessages": {
        "required": "Email is required",
        "format": "Email must be a valid email address",
        "maxLength": "Email cannot exceed 255 characters"
      },
      "examples": {
        "valid": [
          "user@example.com",
          "laura@jane.grace",
          "admin@my.cool.site",
          "test+tag@domain.xyz"
        ],
        "invalid": [
          "notanemail",
          "@domain.com",
          "user@",
          "user @domain.com"
        ]
      }
    },
    "firstName": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "pattern": "^[a-zA-Z\\s'-]+$",
      "errorMessages": {
        "required": "First name is required",
        "minLength": "First name cannot be empty",
        "maxLength": "First name cannot exceed 100 characters",
        "pattern": "First name can only contain letters, spaces, hyphens, and apostrophes"
      },
      "examples": {
        "valid": ["John", "Mary-Anne", "O'Brien", "Laura Jane"],
        "invalid": ["J0hn", "Mary@", "", "   "]
      }
    },
    "lastName": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "pattern": "^[a-zA-Z\\s'-]+$",
      "errorMessages": {
        "required": "Last name is required",
        "minLength": "Last name cannot be empty",
        "maxLength": "Last name cannot exceed 100 characters",
        "pattern": "Last name can only contain letters, spaces, hyphens, and apostrophes"
      },
      "examples": {
        "valid": ["Smith", "Van Der Berg", "O'Malley", "Grace"],
        "invalid": ["Sm1th", "Smith!", "", "   "]
      }
    },
    "roleId": {
      "type": "integer",
      "required": false,
      "min": 1,
      "max": 2147483647,
      "errorMessages": {
        "type": "Role ID must be a number",
        "min": "Role ID must be positive",
        "max": "Role ID exceeds maximum value"
      },
      "examples": {
        "valid": [1, 5, 100],
        "invalid": [0, -1, 2147483648, "abc"]
      }
    },
    "customerProfileId": {
      "type": "integer",
      "required": false,
      "min": 1,
      "max": 2147483647,
      "errorMessages": {
        "type": "Customer profile ID must be a number",
        "min": "Customer profile ID must be positive",
        "max": "Customer profile ID exceeds maximum value"
      },
      "examples": {
        "valid": [1, 5, 100],
        "invalid": [0, -1, "abc"]
      }
    },
    "technicianProfileId": {
      "type": "integer",
      "required": false,
      "min": 1,
      "max": 2147483647,
      "errorMessages": {
        "type": "Technician profile ID must be a number",
        "min": "Technician profile ID must be positive",
        "max": "Technician profile ID exceeds maximum value"
      },
      "examples": {
        "valid": [1, 5, 100],
        "invalid": [0, -1, "abc"]
      }
    },
    "isActive": {
      "type": "boolean",
      "required": false,
      "errorMessages": {
        "type": "is_active must be true or false"
      },
      "examples": {
        "valid": [true, false],
        "invalid": ["yes", "no", 1, 0, "active"]
      }
    },
    "roleName": {
      "type": "string",
      "required": true,
      "minLength": 2,
      "maxLength": 100,
      "trim": true,
      "pattern": "^[a-zA-Z0-9\\s_-]+$",
      "errorMessages": {
        "required": "Role name is required",
        "minLength": "Role name must be at least 2 characters",
        "maxLength": "Role name cannot exceed 100 characters",
        "pattern": "Role name can only contain letters, numbers, spaces, underscores, and hyphens"
      },
      "examples": {
        "valid": ["admin", "project_manager", "client", "super-admin"],
        "invalid": ["a", "role!", "", "   "]
      }
    },
    "rolePriority": {
      "type": "integer",
      "required": false,
      "min": 1,
      "max": 100,
      "default": 50,
      "errorMessages": {
        "type": "Priority must be a number",
        "min": "Priority must be at least 1",
        "max": "Priority cannot exceed 100"
      },
      "examples": {
        "valid": [1, 50, 100],
        "invalid": [0, -1, 101, "high"]
      }
    },
    "roleDescription": {
      "type": "string",
      "required": false,
      "maxLength": 500,
      "trim": true,
      "allowNull": true,
      "errorMessages": {
        "maxLength": "Description cannot exceed 500 characters"
      },
      "examples": {
        "valid": [
          "System administrator with full access",
          "Client with limited project access",
          null
        ],
        "invalid": [""]
      }
    },
    "phone": {
      "type": "string",
      "required": false,
      "pattern": "^\\+?[1-9]\\d{1,14}$",
      "trim": true,
      "errorMessages": {
        "pattern": "Phone number must be in international format (E.164)"
      },
      "examples": {
        "valid": ["+14155552671", "+442071838750", "14155552671"],
        "invalid": ["123", "not-a-phone", "+1234567890123456"]
      }
    },
    "url": {
      "type": "string",
      "required": false,
      "maxLength": 2048,
      "pattern": "^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)$",
      "errorMessages": {
        "pattern": "Must be a valid URL starting with http:// or https://",
        "maxLength": "URL cannot exceed 2048 characters"
      },
      "examples": {
        "valid": [
          "https://example.com",
          "http://my-site.co.uk/path?query=value"
        ],
        "invalid": ["not-a-url", "ftp://example.com", "example.com"]
      }
    },
    "companyName": {
      "type": "string",
      "required": false,
      "maxLength": 255,
      "trim": true,
      "errorMessages": {
        "maxLength": "Company name cannot exceed 255 characters"
      }
    },
    "licenseNumber": {
      "type": "string",
      "required": true,
      "minLength": 3,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "License number is required",
        "minLength": "License number must be at least 3 characters",
        "maxLength": "License number cannot exceed 100 characters"
      }
    },
    "hourlyRate": {
      "type": "number",
      "required": false,
      "min": 0,
      "max": 9999.99,
      "errorMessages": {
        "type": "Hourly rate must be a number",
        "min": "Hourly rate cannot be negative",
        "max": "Hourly rate cannot exceed 9999.99"
      }
    },
    "sku": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "SKU is required",
        "minLength": "SKU cannot be empty",
        "maxLength": "SKU cannot exceed 100 characters"
      }
    },
    "quantity": {
      "type": "integer",
      "required": true,
      "min": 0,
      "errorMessages": {
        "required": "Quantity is required",
        "type": "Quantity must be an integer",
        "min": "Quantity cannot be negative"
      }
    },
    "amount": {
      "type": "number",
      "required": true,
      "min": 0,
      "errorMessages": {
        "required": "Amount is required",
        "type": "Amount must be a number",
        "min": "Amount cannot be negative"
      }
    },
    "invoiceNumber": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "Invoice number is required",
        "minLength": "Invoice number cannot be empty",
        "maxLength": "Invoice number cannot exceed 100 characters"
      }
    },
    "contractNumber": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "Contract number is required",
        "minLength": "Contract number cannot be empty",
        "maxLength": "Contract number cannot exceed 100 characters"
      }
    },
    "title": {
      "type": "string",
      "required": true,
      "minLength": 3,
      "maxLength": 255,
      "trim": true,
      "errorMessages": {
        "required": "Title is required",
        "minLength": "Title must be at least 3 characters",
        "maxLength": "Title cannot exceed 255 characters"
      }
    },
    "description": {
      "type": "string",
      "required": false,
      "maxLength": 5000,
      "trim": true,
      "errorMessages": {
        "maxLength": "Description cannot exceed 5000 characters"
      }
    },
    "customerId": {
      "type": "integer",
      "required": true,
      "min": 1,
      "errorMessages": {
        "required": "Customer ID is required",
        "type": "Customer ID must be an integer",
        "min": "Customer ID must be positive"
      }
    },
    "technicianId": {
      "type": "integer",
      "required": false,
      "min": 1,
      "errorMessages": {
        "type": "Technician ID must be an integer",
        "min": "Technician ID must be positive"
      }
    },
    "workOrderId": {
      "type": "integer",
      "required": false,
      "min": 1,
      "errorMessages": {
        "type": "Work order ID must be an integer",
        "min": "Work order ID must be positive"
      }
    },
    "status": {
      "type": "string",
      "required": false,
      "maxLength": 50,
      "trim": true,
      "errorMessages": {
        "maxLength": "Status cannot exceed 50 characters"
      }
    },
    "roleStatus": {
      "type": "string",
      "required": false,
      "enum": ["active", "disabled"],
      "errorMessages": {
        "enum": "Role status must be one of: active, disabled"
      }
    },
    "userStatus": {
      "type": "string",
      "required": false,
      "enum": ["pending_activation", "active", "suspended"],
      "errorMessages": {
        "enum": "User status must be one of: pending_activation, active, suspended"
      }
    },
    "customerStatus": {
      "type": "string",
      "required": false,
      "enum": ["pending", "active", "suspended"],
      "errorMessages": {
        "enum": "Customer status must be one of: pending, active, suspended"
      }
    },
    "technicianStatus": {
      "type": "string",
      "required": false,
      "enum": ["available", "on_job", "off_duty", "suspended"],
      "errorMessages": {
        "enum": "Technician status must be one of: available, on_job, off_duty, suspended"
      }
    },
    "workOrderStatus": {
      "type": "string",
      "required": false,
      "enum": ["pending", "assigned", "in_progress", "completed", "cancelled"],
      "errorMessages": {
        "enum": "Work order status must be one of: pending, assigned, in_progress, completed, cancelled"
      }
    },
    "invoiceStatus": {
      "type": "string",
      "required": false,
      "enum": ["draft", "sent", "paid", "overdue", "cancelled"],
      "errorMessages": {
        "enum": "Invoice status must be one of: draft, sent, paid, overdue, cancelled"
      }
    },
    "contractStatus": {
      "type": "string",
      "required": false,
      "enum": ["draft", "active", "expired", "cancelled"],
      "errorMessages": {
        "enum": "Contract status must be one of: draft, active, expired, cancelled"
      }
    },
    "inventoryStatus": {
      "type": "string",
      "required": false,
      "enum": ["in_stock", "low_stock", "out_of_stock", "discontinued"],
      "errorMessages": {
        "enum": "Inventory status must be one of: in_stock, low_stock, out_of_stock, discontinued"
      }
    },
    "priority": {
      "type": "string",
      "required": false,
      "enum": ["low", "normal", "high", "urgent"],
      "errorMessages": {
        "enum": "Priority must be one of: low, normal, high, urgent"
      }
    },
    "company_name": {
      "type": "string",
      "required": false,
      "maxLength": 255,
      "trim": true,
      "errorMessages": {
        "maxLength": "Company name cannot exceed 255 characters"
      }
    },
    "startDate": {
      "type": "date",
      "format": "date",
      "required": false,
      "errorMessages": {
        "required": "Start date is required",
        "format": "Start date must be a valid date in ISO format (YYYY-MM-DD)"
      }
    },
    "endDate": {
      "type": "date",
      "format": "date",
      "required": false,
      "errorMessages": {
        "required": "End date is required",
        "format": "End date must be a valid date in ISO format (YYYY-MM-DD)"
      }
    },
    "dueDate": {
      "type": "date",
      "format": "date",
      "required": false,
      "errorMessages": {
        "format": "Due date must be a valid date in ISO format (YYYY-MM-DD)"
      }
    },
    "due_date": {
      "type": "date",
      "format": "date",
      "required": false,
      "errorMessages": {
        "format": "Due date must be a valid date in ISO format (YYYY-MM-DD)"
      }
    },
    "first_name": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "pattern": "^[a-zA-Z\\s'-]+$",
      "errorMessages": {
        "required": "First name is required",
        "minLength": "First name cannot be empty",
        "maxLength": "First name cannot exceed 100 characters",
        "pattern": "First name can only contain letters, spaces, hyphens, and apostrophes"
      }
    },
    "last_name": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "pattern": "^[a-zA-Z\\s'-]+$",
      "errorMessages": {
        "required": "Last name is required",
        "minLength": "Last name cannot be empty",
        "maxLength": "Last name cannot exceed 100 characters",
        "pattern": "Last name can only contain letters, spaces, hyphens, and apostrophes"
      }
    },
    "role_id": {
      "type": "integer",
      "required": false,
      "min": 1,
      "max": 2147483647,
      "errorMessages": {
        "type": "Role ID must be a number",
        "min": "Role ID must be positive",
        "max": "Role ID exceeds maximum value"
      }
    },
    "is_active": {
      "type": "boolean",
      "required": false,
      "errorMessages": {
        "type": "is_active must be true or false"
      }
    },
    "license_number": {
      "type": "string",
      "required": true,
      "minLength": 3,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "License number is required",
        "minLength": "License number must be at least 3 characters",
        "maxLength": "License number cannot exceed 100 characters"
      }
    },
    "hourly_rate": {
      "type": "number",
      "required": false,
      "min": 0,
      "max": 9999.99,
      "errorMessages": {
        "type": "Hourly rate must be a number",
        "min": "Hourly rate cannot be negative",
        "max": "Hourly rate cannot exceed 9999.99"
      }
    },
    "customer_id": {
      "type": "integer",
      "required": true,
      "min": 1,
      "errorMessages": {
        "required": "Customer ID is required",
        "type": "Customer ID must be an integer",
        "min": "Customer ID must be positive"
      }
    },
    "assigned_technician_id": {
      "type": "integer",
      "required": false,
      "min": 1,
      "errorMessages": {
        "type": "Assigned technician ID must be an integer",
        "min": "Assigned technician ID must be positive"
      }
    },
    "work_order_id": {
      "type": "integer",
      "required": false,
      "min": 1,
      "errorMessages": {
        "type": "Work order ID must be an integer",
        "min": "Work order ID must be positive"
      }
    },
    "invoice_number": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "Invoice number is required",
        "minLength": "Invoice number cannot be empty",
        "maxLength": "Invoice number cannot exceed 100 characters"
      }
    },
    "contract_number": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 100,
      "trim": true,
      "errorMessages": {
        "required": "Contract number is required",
        "minLength": "Contract number cannot be empty",
        "maxLength": "Contract number cannot exceed 100 characters"
      }
    },
    "start_date": {
      "type": "string",
      "required": false,
      "format": "date",
      "errorMessages": {
        "format": "Start date must be in YYYY-MM-DD format"
      }
    },
    "end_date": {
      "type": "string",
      "required": false,
      "format": "date",
      "errorMessages": {
        "format": "End date must be in YYYY-MM-DD format"
      }
    },
    "value": {
      "type": "number",
      "required": false,
      "min": 0,
      "errorMessages": {
        "type": "Value must be a number",
        "min": "Value cannot be negative"
      }
    },
    "total": {
      "type": "number",
      "required": true,
      "min": 0,
      "errorMessages": {
        "required": "Total is required",
        "type": "Total must be a number",
        "min": "Total cannot be negative"
      }
    },
    "tax": {
      "type": "number",
      "required": false,
      "min": 0,
      "errorMessages": {
        "type": "Tax must be a number",
        "min": "Tax cannot be negative"
      }
    }
  },
  "compositeValidations": {
    "createUser": {
      "requiredFields": ["email", "first_name", "last_name"],
      "optionalFields": ["role_id", "customer_profile_id", "technician_profile_id"],
      "description": "Validation rules for creating a new user"
    },
    "updateUser": {
      "requiredFields": [],
      "optionalFields": ["email", "first_name", "last_name", "role_id", "is_active", "customer_profile_id", "technician_profile_id"],
      "description": "Validation rules for updating an existing user (all fields optional)"
    },
    "createRole": {
      "requiredFields": ["name"],
      "optionalFields": ["priority", "description", "status"],
      "description": "Validation rules for creating a new role"
    },
    "updateRole": {
      "requiredFields": [],
      "optionalFields": ["name", "priority", "description", "status", "is_active"],
      "description": "Validation rules for updating an existing role"
    },
    "createCustomer": {
      "requiredFields": ["email"],
      "optionalFields": ["phone", "company_name"],
      "description": "Validation rules for creating a customer profile"
    },
    "updateCustomer": {
      "requiredFields": [],
      "optionalFields": ["email", "phone", "company_name", "is_active", "status"],
      "description": "Validation rules for updating a customer profile"
    },
    "createTechnician": {
      "requiredFields": ["license_number"],
      "optionalFields": ["hourly_rate", "status"],
      "description": "Validation rules for creating a technician profile"
    },
    "updateTechnician": {
      "requiredFields": [],
      "optionalFields": ["license_number", "hourly_rate", "is_active", "status"],
      "description": "Validation rules for updating a technician profile"
    },
    "createWorkOrder": {
      "requiredFields": ["title", "customer_id"],
      "optionalFields": ["description", "assigned_technician_id", "priority", "status"],
      "description": "Validation rules for creating a work order"
    },
    "updateWorkOrder": {
      "requiredFields": [],
      "optionalFields": ["title", "description", "assigned_technician_id", "priority", "status", "is_active"],
      "description": "Validation rules for updating a work order"
    },
    "createInvoice": {
      "requiredFields": ["invoice_number", "customer_id", "amount", "total"],
      "optionalFields": ["work_order_id", "tax", "status"],
      "description": "Validation rules for creating an invoice"
    },
    "updateInvoice": {
      "requiredFields": [],
      "optionalFields": ["invoice_number", "amount", "tax", "total", "status", "is_active"],
      "description": "Validation rules for updating an invoice"
    },
    "createContract": {
      "requiredFields": ["contract_number", "customer_id"],
      "optionalFields": ["start_date", "end_date", "value", "status"],
      "description": "Validation rules for creating a contract"
    },
    "updateContract": {
      "requiredFields": [],
      "optionalFields": ["contract_number", "start_date", "end_date", "value", "status", "is_active"],
      "description": "Validation rules for updating a contract"
    },
    "createInventory": {
      "requiredFields": ["name", "sku"],
      "optionalFields": ["description", "quantity", "status"],
      "description": "Validation rules for creating an inventory item"
    },
    "updateInventory": {
      "requiredFields": [],
      "optionalFields": ["name", "sku", "description", "quantity", "status", "is_active"],
      "description": "Validation rules for updating an inventory item"
    }
  },
  "metadata": {
    "maintainer": "TrossApp Team",
    "documentation": "docs/VALIDATION_ARCHITECTURE.md",
    "changelog": [
      {
        "version": "2.0.0",
        "date": "2025-11-13",
        "changes": [
          "Added validation rules for work order system",
          "Added fields: companyName, licenseNumber, hourlyRate, sku, quantity, amount, invoiceNumber, contractNumber, title, description, customerId, technicianId, workOrderId, status, priority",
          "REMOVED password field - Auth0 handles all authentication",
          "REMOVED signup validation - customers sign up via Auth0 UI",
          "Added composite validations for: customers, technicians, work_orders, invoices, contracts, inventory"
        ]
      },
      {
        "version": "1.0.0",
        "date": "2025-11-10",
        "changes": [
          "Initial centralized validation schema",
          "Permissive email TLD validation policy",
          "Complete field definitions for users and roles"
        ]
      }
    ]
  }
}
