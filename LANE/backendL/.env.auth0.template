# Auth0 Configuration Template
# Copy these variables to your .env file and fill in your Auth0 values

# =============================================================================
# AUTH0 PRODUCTION CONFIGURATION
# =============================================================================

# Your Auth0 domain (e.g., 'your-app.auth0.com')
AUTH0_DOMAIN=your-domain.auth0.com

# Auth0 Application Client ID
AUTH0_CLIENT_ID=your_client_id_here

# Auth0 Application Client Secret
AUTH0_CLIENT_SECRET=your_client_secret_here

# Auth0 API Audience (Optional - defaults to https://api.trossapp.com)
AUTH0_AUDIENCE=https://api.trossapp.com

# Auth0 Callback URL (where Auth0 redirects after login)
AUTH0_CALLBACK_URL=https://api.trossapp.com/api/auth0/callback

# =============================================================================
# ENVIRONMENT-SPECIFIC CALLBACK URLS
# =============================================================================

# Development
# AUTH0_CALLBACK_URL=http://localhost:3001/api/auth0/callback

# Staging
# AUTH0_CALLBACK_URL=https://staging-api.trossapp.com/api/auth0/callback

# Production
# AUTH0_CALLBACK_URL=https://api.trossapp.com/api/auth0/callback

# =============================================================================
# AUTH0 SETUP INSTRUCTIONS
# =============================================================================

# 1. Create Auth0 Account:
#    - Go to https://auth0.com and create a free account
#    - Create a new tenant for your application

# 2. Create Auth0 Application:
#    - In Auth0 Dashboard, go to Applications
#    - Click "Create Application"
#    - Choose "Regular Web Application"
#    - Name it "TrossApp Backend"

# 3. Configure Application Settings:
#    - Copy Client ID to AUTH0_CLIENT_ID above
#    - Copy Client Secret to AUTH0_CLIENT_SECRET above
#    - Add callback URLs to "Allowed Callback URLs":
#      http://localhost:3001/api/auth0/callback (development)
#      https://api.trossapp.com/api/auth0/callback (production)
#    - Add logout URLs to "Allowed Logout URLs":
#      http://localhost:3000 (development)
#      https://trossapp.com (production)
#    - Add web origins to "Allowed Web Origins":
#      http://localhost:3000 (development)
#      https://trossapp.com (production)

# 4. Create Auth0 API (Optional):
#    - In Auth0 Dashboard, go to APIs
#    - Click "Create API"
#    - Name: "TrossApp API"
#    - Identifier: https://api.trossapp.com
#    - Copy identifier to AUTH0_AUDIENCE above

# 5. Configure User Roles (Optional):
#    - In Auth0 Dashboard, go to User Management > Roles
#    - Create roles: admin, manager, dispatcher, technician, client
#    - Add custom claim in Rules or Actions to include role in JWT

# 6. Test Configuration:
#    - Set AUTH_MODE=auth0 in your .env file
#    - Restart the backend server
#    - Try accessing /api/auth0/login endpoint

# =============================================================================
# CUSTOM CLAIMS FOR USER ROLES
# =============================================================================

# Add this Rule/Action in Auth0 to include user roles in JWT:
# 
# function (user, context, callback) {
#   const namespace = 'https://trossapp.com/';
#   context.idToken[namespace + 'role'] = user.app_metadata.role || 'technician';
#   context.accessToken[namespace + 'role'] = user.app_metadata.role || 'technician';
#   callback(null, user, context);
# }

# =============================================================================
# REQUIRED DEPENDENCIES FOR AUTH0 INTEGRATION
# =============================================================================

# When ready to implement, install these packages:
# npm install auth0 jwks-rsa express-session

# Dependencies explanation:
# - auth0: Official Auth0 SDK for Node.js
# - jwks-rsa: JSON Web Key Set client for verifying Auth0 JWTs
# - express-session: Session management for OAuth state parameter