{
  "name": "trossapp",
  "version": "1.0.0",
  "description": "TrossApp - Skills-based work order management system monorepo",
  "directories": {
    "doc": "docs"
  },
  "scripts": {
    "predev:backend": "node scripts/check-dev-ports.js --backend || node scripts/kill-dev-ports.js --backend",
    "predev:frontend": "node scripts/check-dev-ports.js --frontend || node scripts/kill-dev-ports.js --frontend",
    "test": "npm run test:backend && npm run test:frontend",
    "test:backend": "npm test --workspace=backend",
    "test:backend:unit": "npm test --workspace=backend -- --selectProjects=unit",
    "test:backend:integration": "npm test --workspace=backend -- --selectProjects=integration",
    "test:backend:bail": "npm test --workspace=backend -- --bail",
    "test:backend:one": "npm test --workspace=backend -- --testPathPattern",
    "test:unit": "npm test --workspace=backend -- --selectProjects=unit",
    "test:integration": "npm test --workspace=backend -- --selectProjects=integration",
    "test:integration:filter": "npm test --workspace=backend -- --selectProjects=integration --testPathPattern",
    "test:frontend": "cd frontend && dart run tool/test_runner.dart",
    "test:frontend:all": "cd frontend && dart run tool/test_runner.dart --all",
    "test:frontend:verbose": "cd frontend && dart run tool/test_runner.dart --verbose",
    "test:frontend:watch": "cd frontend && dart run tool/test_runner.dart --watch",
    "test:frontend:file": "cd frontend && dart run tool/test_runner.dart",
    "test:frontend:raw": "cd frontend && flutter test",
    "test:frontend:failures": "cd frontend && flutter test --reporter json 2>/dev/null | dart run tool/parse_failures.dart",
    "test:frontend:coverage": "cd frontend && flutter test --coverage && cat coverage/lcov.info | grep -E '^(SF:|DA:)' | awk -F: '/^SF:/{file=$2}/^DA:/{split($2,a,\",\");if(a[2]>0)hit++;total++}END{printf\"Coverage: %d/%d (%.1f%%)\\n\",hit,total,(hit/total)*100}'",
    "test:e2e": "playwright test",
    "test:e2e:smoke": "playwright test --grep @smoke",
    "test:e2e:security": "playwright test --grep @security",
    "test:load": "npx artillery run tools/testing/load-test.yml",
    "test:all": "npm run test:unit && npm run test:integration && npm run test:frontend && npm run test:e2e",
    "test:watch": "npm run test:watch --workspace=backend",
    "test:coverage": "npm run test:coverage --workspace=backend",
    "sync:metadata": "node scripts/sync-entity-metadata.js",
    "format:check": "prettier --check '**/*.{js,json,md}' || echo 'Format check: some files need formatting'",
    "format": "prettier --write '**/*.{js,json,md}'",
    "start:dev": "scripts\\start-dev.bat",
    "stop": "scripts\\stop-dev.bat",
    "dev:backend": "npm run dev --workspace=backend",
    "dev:backend:railway": "cross-env DB_ENV=railway npm run dev --workspace=backend",
    "dev:frontend": "cd frontend && flutter run -d chrome --web-port=8080 --web-hostname=0.0.0.0 --web-launch-url=http://localhost:8080 --dart-define=USE_PROD_BACKEND=false",
    "dev:frontend:prod-backend": "cd frontend && flutter run -d chrome --web-port=8080 --web-hostname=0.0.0.0 --web-launch-url=http://localhost:8080 --dart-define=USE_PROD_BACKEND=true",
    "dev:frontend:stable": "cd frontend && flutter run -d chrome --web-port=8080 --web-hostname=0.0.0.0 --web-launch-url=http://localhost:8080 --disable-service-auth-codes",
    "dev:frontend:debug": "cd frontend && flutter run -d chrome --web-port=8080 --web-hostname=0.0.0.0 --web-launch-url=http://localhost:8080 --debug",
    "dev:frontend:release": "cd frontend && flutter run -d chrome --web-port=8080 --web-hostname=0.0.0.0 --web-launch-url=http://localhost:8080 --release",
    "dev:frontend:server": "cd frontend && flutter run -d web-server --web-port=8080 --web-hostname=0.0.0.0",
    "dev:frontend:edge": "cd frontend && flutter run -d chrome --web-port=8080 --web-hostname=0.0.0.0 --web-launch-url=http://localhost:8080",
    "clean:flutter": "cd frontend && flutter clean && flutter pub get",
    "health": "node scripts/health-check.js",
    "health:backend": "node -e \"const p=require('./config/ports');require('child_process').execSync('curl -f '+p.BACKEND_HEALTH_URL,{stdio:'inherit'})\" || echo Backend not responding",
    "ports:check": "node scripts/check-dev-ports.js",
    "ports:kill": "node scripts/kill-dev-ports.js",
    "ports:kill:all": "node scripts/kill-dev-ports.js --all",
    "build:all": "npm run build --workspace=backend && cd frontend && flutter build web",
    "ci:test": "npm run test:all",
    "db:setup": "docker-compose up -d db && npm run db:init --workspace=backend",
    "db:start": "docker-compose up -d db",
    "db:stop": "docker-compose stop db",
    "db:migrate": "npm run db:migrate --workspace=backend",
    "db:seed": "npm run seed:admin --workspace=backend",
    "db:init": "npm run db:init --workspace=backend",
    "db:rebuild": "node backend/scripts/reset-databases-clean.js --dev-only && npm run db:init --workspace=backend",
    "db:rebuild:all": "node backend/scripts/reset-databases-clean.js",
    "db:status": "docker-compose ps db",
    "db:test:start": "docker-compose -f docker-compose.test.yml up -d",
    "db:test:stop": "docker-compose -f docker-compose.test.yml down",
    "db:test:reset": "docker-compose -f docker-compose.test.yml down -v && docker-compose -f docker-compose.test.yml up -d",
    "db:test:logs": "docker-compose -f docker-compose.test.yml logs -f postgres-test",
    "docs:api:export": "node backend/scripts/export-openapi.js",
    "docs:api:generate": "npm run docs:api:export && echo 'API docs exported! Import docs/api/openapi.json into Postman'"
  },
  "keywords": [],
  "author": "TrossApp Team",
  "license": "MIT",
  "type": "commonjs",
  "private": "true",
  "workspaces": [
    "backend"
  ],
  "devDependencies": {
    "@playwright/test": "^1.55.1",
    "artillery": "^2.0.27",
    "artillery-plugin-expect": "^2.21.0",
    "concurrently": "^9.2.1",
    "cross-env": "^10.1.0",
    "depcheck": "^1.4.7",
    "eslint": "^9.36.0",
    "prettier": "^3.6.2"
  },
  "dependencies": {
    "auth0": "^5.0.0"
  }
}
