{
  "$schema": "./nav-config.schema.json",
  "version": "1.4.0",

  "_comments": {
    "permissionResource": "Maps to permissions.json resource for nav visibility. Distinct from entity-metadata.json rlsResource which controls row-level data access.",
    "syntheticResources": "dashboard, admin_panel, preferences are synthetic (non-entity) resources defined in permissions.json for nav visibility checks.",
    "sidebarStrategies": "Define which groups/entities appear in sidebar based on route context. Routes declare their strategy via routeStrategies."
  },

  "sidebarStrategies": {
    "app": {
      "label": "Main Navigation",
      "groups": ["crm", "operations", "finance", "admin"],
      "includeEntities": true,
      "showDashboard": true
    },
    "admin": {
      "label": "Administration",
      "groups": ["crm", "operations", "finance", "admin"],
      "includeEntities": true,
      "sections": [
        { 
          "id": "home", 
          "label": "Home", 
          "icon": "dashboard_outlined", 
          "route": "/admin",
          "order": 0,
          "permissionResource": "admin_panel"
        },
        { 
          "id": "entities", 
          "label": "Entities", 
          "icon": "dataset_outlined", 
          "order": 1,
          "isGrouper": true,
          "permissionResource": "admin_panel"
        },
        { 
          "id": "logs", 
          "label": "Logs", 
          "icon": "history_outlined", 
          "order": 2,
          "route": "/admin/system/logs",
          "permissionResource": "admin_panel"
        },
        { 
          "id": "files", 
          "label": "Files", 
          "icon": "folder_outlined", 
          "order": 3,
          "route": "/admin/system/files",
          "permissionResource": "admin_panel"
        }
      ]
    }
  },

  "routeStrategies": {
    "/home": "app",
    "/admin": "admin",
    "/admin/*": "admin",
    "/settings": "app"
  },

  "publicRoutes": [
    { "id": "root", "path": "/" },
    { "id": "login", "path": "/login" },
    { "id": "callback", "path": "/callback" },
    { "id": "error", "path": "/error" },
    { "id": "unauthorized", "path": "/unauthorized" },
    { "id": "notFound", "path": "/not-found" }
  ],

  "groups": [
    { "id": "main", "label": "Main", "order": 0 },
    { "id": "crm", "label": "CRM", "order": 1 },
    { "id": "operations", "label": "Operations", "order": 2 },
    { "id": "finance", "label": "Finance", "order": 3 },
    { "id": "admin", "label": "Administration", "order": 98 }
  ],

  "staticItems": [
    {
      "id": "dashboard",
      "label": "Dashboard",
      "icon": "dashboard_outlined",
      "route": "/",
      "group": "main",
      "order": 0,
      "permissionResource": "dashboard",
      "menuType": "sidebar"
    },
    {
      "id": "admin_panel",
      "label": "Admin",
      "icon": "admin_panel_settings_outlined",
      "route": "/admin",
      "group": "account",
      "order": 0,
      "permissionResource": "admin_panel",
      "menuType": "userMenu"
    },
    {
      "id": "settings",
      "label": "Settings",
      "icon": "settings_outlined",
      "route": "/settings",
      "group": "account",
      "order": 1,
      "menuType": "userMenu"
    }
  ],

  "entityPlacements": {
    "customer": { "group": "crm", "order": 1 },
    "contract": { "group": "crm", "order": 2 },
    "invoice": { "group": "finance", "order": 1 },
    "technician": { "group": "operations", "order": 1 },
    "work_order": { "group": "operations", "order": 2 },
    "inventory": { "group": "operations", "order": 3 },
    "user": { "group": "admin", "order": 1 },
    "role": { "group": "admin", "order": 2 }
  }
}
