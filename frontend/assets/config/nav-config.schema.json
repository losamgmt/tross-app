{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://trossapp.com/schemas/nav-config.json",
  "title": "TrossApp Navigation Configuration",
  "description": "Defines navigation structure, static items, and entity placements. Used by frontend to build metadata-driven navigation.",
  "type": "object",
  "required": ["publicRoutes", "groups", "staticItems", "entityPlacements"],
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Schema version for compatibility checking"
    },
    "publicRoutes": {
      "type": "array",
      "description": "Routes accessible without authentication",
      "items": {
        "type": "object",
        "required": ["id", "path"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the route (maps to screen widget)"
          },
          "path": {
            "type": "string",
            "pattern": "^/",
            "description": "URL path (must start with /)"
          }
        }
      }
    },
    "groups": {
      "type": "array",
      "description": "Navigation groups for organizing menu items",
      "items": {
        "type": "object",
        "required": ["id", "label", "order"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique group identifier (referenced by items)"
          },
          "label": {
            "type": "string",
            "description": "Display label for the group header"
          },
          "order": {
            "type": "integer",
            "minimum": 0,
            "description": "Sort order (lower = higher in nav)"
          }
        }
      }
    },
    "staticItems": {
      "type": "array",
      "description": "Non-entity navigation items (dashboard, admin, etc.)",
      "items": {
        "type": "object",
        "required": ["id", "label", "route", "group", "order", "rlsResource"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the item"
          },
          "label": {
            "type": "string",
            "description": "Display label in navigation"
          },
          "route": {
            "type": "string",
            "pattern": "^/",
            "description": "URL path (must start with /)"
          },
          "group": {
            "type": "string",
            "description": "Group ID this item belongs to"
          },
          "order": {
            "type": "integer",
            "minimum": 0,
            "description": "Sort order within group"
          },
          "rlsResource": {
            "type": "string",
            "description": "Resource name in permissions.json for visibility check"
          }
        }
      }
    },
    "entityPlacements": {
      "type": "object",
      "description": "Placement configuration for entities in navigation. Key = entity name (camelCase).",
      "additionalProperties": {
        "type": "object",
        "required": ["group", "order"],
        "additionalProperties": false,
        "properties": {
          "group": {
            "type": "string",
            "description": "Group ID this entity belongs to"
          },
          "order": {
            "type": "integer",
            "minimum": 0,
            "description": "Sort order within group"
          }
        }
      }
    }
  }
}
