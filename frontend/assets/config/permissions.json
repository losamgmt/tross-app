{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://trossapp.com/schemas/permissions.json",
  "title": "TrossApp Permission Configuration",
  "description": "Single source of truth for role-based access control (RBAC). AUTO-GENERATED from entity metadata - run sync-permissions.js to regenerate.",
  "version": "4.0.0-derived",
  "lastModified": "2026-01-21",
  "roles": {
    "customer": {
      "priority": 1,
      "description": "Basic access - can view own data and work orders"
    },
    "technician": {
      "priority": 2,
      "description": "Executes work orders, can view user list"
    },
    "dispatcher": {
      "priority": 3,
      "description": "Creates and assigns work orders"
    },
    "manager": {
      "priority": 4,
      "description": "Manages operations - can view roles, manage work orders"
    },
    "admin": {
      "priority": 5,
      "description": "Full system access - can manage users, roles, and all resources"
    }
  },
  "resources": {
    "admin_panel": {
      "description": "Admin control center - system health, sessions, audit logs",
      "rowLevelSecurity": {
        "customer": "deny_all",
        "technician": "deny_all",
        "dispatcher": "deny_all",
        "manager": "deny_all",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - create permission"
        },
        "read": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - read permission"
        },
        "update": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - update permission"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - delete permission"
        }
      }
    },
    "audit_logs": {
      "description": "System audit trail and security events",
      "rowLevelSecurity": {
        "customer": "deny_all",
        "technician": "deny_all",
        "dispatcher": "deny_all",
        "manager": "deny_all",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Synthetic resource - create permission"
        },
        "read": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - read permission"
        },
        "update": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - update permission"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - delete permission"
        }
      }
    },
    "contracts": {
      "description": "contracts resource",
      "rowLevelSecurity": {
        "customer": "own_contracts_only",
        "technician": "deny_all",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - create requires manager"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - update requires manager"
        },
        "delete": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - delete requires manager"
        }
      }
    },
    "customers": {
      "description": "customers resource",
      "rowLevelSecurity": {
        "customer": "own_record_only",
        "technician": "all_records",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "dispatcher",
          "minimumPriority": 3,
          "description": "Entity-level override - create requires dispatcher"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - update requires customer"
        },
        "delete": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - delete requires manager"
        }
      }
    },
    "dashboard": {
      "description": "Main dashboard view - role-driven overview",
      "rowLevelSecurity": {
        "customer": "own_record_only",
        "technician": "own_record_only",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - create permission"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Synthetic resource - read permission"
        },
        "update": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - update permission"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - delete permission"
        }
      }
    },
    "file_attachments": {
      "description": "file_attachments resource",
      "rowLevelSecurity": {
        "customer": "parent_entity_access",
        "technician": "parent_entity_access",
        "dispatcher": "parent_entity_access",
        "manager": "parent_entity_access",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "technician",
          "minimumPriority": 2,
          "description": "Entity-level override - create requires technician"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "technician",
          "minimumPriority": 2,
          "description": "Entity-level override - update requires technician"
        },
        "delete": {
          "minimumRole": "dispatcher",
          "minimumPriority": 3,
          "description": "Entity-level override - delete requires dispatcher"
        }
      }
    },
    "inventory": {
      "description": "inventory resource",
      "rowLevelSecurity": {
        "customer": "public_resource",
        "technician": "public_resource",
        "dispatcher": "public_resource",
        "manager": "public_resource",
        "admin": "public_resource"
      },
      "permissions": {
        "create": {
          "minimumRole": "dispatcher",
          "minimumPriority": 3,
          "description": "Entity-level override - create requires dispatcher"
        },
        "read": {
          "minimumRole": "technician",
          "minimumPriority": 2,
          "description": "Entity-level override - read requires technician"
        },
        "update": {
          "minimumRole": "technician",
          "minimumPriority": 2,
          "description": "Entity-level override - update requires technician"
        },
        "delete": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - delete requires manager"
        }
      }
    },
    "invoices": {
      "description": "invoices resource",
      "rowLevelSecurity": {
        "customer": "own_invoices_only",
        "technician": "deny_all",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "dispatcher",
          "minimumPriority": 3,
          "description": "Entity-level override - create requires dispatcher"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "dispatcher",
          "minimumPriority": 3,
          "description": "Entity-level override - update requires dispatcher"
        },
        "delete": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - delete requires manager"
        }
      }
    },
    "notifications": {
      "description": "notifications resource",
      "rowLevelSecurity": {
        "customer": "own_record_only",
        "technician": "own_record_only",
        "dispatcher": "own_record_only",
        "manager": "own_record_only",
        "admin": "own_record_only"
      },
      "permissions": {
        "create": {
          "minimumRole": null,
          "minimumPriority": 0,
          "description": "Operation disabled - create is system-only (not available via API)",
          "disabled": true
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - update requires customer"
        },
        "delete": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - delete requires customer"
        }
      }
    },
    "preferences": {
      "description": "preferences resource",
      "rowLevelSecurity": {
        "customer": "own_record_only",
        "technician": "own_record_only",
        "dispatcher": "own_record_only",
        "manager": "own_record_only",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - create requires customer"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - update requires customer"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - delete requires admin"
        },
        "admin": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Custom operation - admin requires admin"
        }
      }
    },
    "roles": {
      "description": "roles resource",
      "rowLevelSecurity": {
        "customer": "public_resource",
        "technician": "public_resource",
        "dispatcher": "public_resource",
        "manager": "public_resource",
        "admin": "public_resource"
      },
      "permissions": {
        "create": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - create requires admin"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - update requires admin"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - delete requires admin"
        }
      }
    },
    "saved_views": {
      "description": "saved_views resource",
      "rowLevelSecurity": {
        "customer": "own_record_only",
        "technician": "own_record_only",
        "dispatcher": "own_record_only",
        "manager": "own_record_only",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - create requires customer"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - update requires customer"
        },
        "delete": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - delete requires customer"
        }
      }
    },
    "system_settings": {
      "description": "System-wide configuration (maintenance mode, feature flags)",
      "rowLevelSecurity": {
        "customer": "deny_all",
        "technician": "deny_all",
        "dispatcher": "deny_all",
        "manager": "deny_all",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - create permission"
        },
        "read": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - read permission"
        },
        "update": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - update permission"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Synthetic resource - delete permission"
        }
      }
    },
    "technicians": {
      "description": "technicians resource",
      "rowLevelSecurity": {
        "customer": "all_records",
        "technician": "all_records",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - create requires manager"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "technician",
          "minimumPriority": 2,
          "description": "Entity-level override - update requires technician"
        },
        "delete": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - delete requires manager"
        }
      }
    },
    "users": {
      "description": "users resource",
      "rowLevelSecurity": {
        "customer": "own_record_only",
        "technician": "all_records",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - create requires admin"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - update requires admin"
        },
        "delete": {
          "minimumRole": "admin",
          "minimumPriority": 5,
          "description": "Entity-level override - delete requires admin"
        }
      }
    },
    "work_orders": {
      "description": "work_orders resource",
      "rowLevelSecurity": {
        "customer": "own_work_orders_only",
        "technician": "assigned_work_orders_only",
        "dispatcher": "all_records",
        "manager": "all_records",
        "admin": "all_records"
      },
      "permissions": {
        "create": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - create requires customer"
        },
        "read": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - read requires customer"
        },
        "update": {
          "minimumRole": "customer",
          "minimumPriority": 1,
          "description": "Entity-level override - update requires customer"
        },
        "delete": {
          "minimumRole": "manager",
          "minimumPriority": 4,
          "description": "Entity-level override - delete requires manager"
        }
      }
    }
  }
}
